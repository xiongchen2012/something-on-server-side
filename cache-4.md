## 代理服务器缓存

前面两篇博客写的是客户端缓存（即缓存的数据存储在客户端本地），而代理服务器缓存则是缓存在代理服务器上。代理服务器分为正向代理和反向代理。

### 代理服务器缓存的作用

客户端因为种种原因不能直接访问源服务器时（比如客户端或源服务器处于防火墙隔绝的内网，或者源服务器访问量很大需要做负载均衡等），这时候需要通过代理服务器转发请求。<br/>

其当客户端第1次访问源服务器需某资源时，代理服务器会将源服务器的资源保存到本地，然后发送给客户端。<br/>

当有其它客户端访问相同的资源时，如果该资源没有更新，代理服务器会将缓存的内容直接发送给客户端。从而达到加快响应的目标。<br/>

**因为代理服务器缓存理解起来比较简单，而且各种代理服务器缓存的方式也不一样，这里不详细写了**~~（其实是我不会）~~  下面开始跑题：

---

### 正向代理

正向代理位于客户端和目标服务器之间。客户端无法直接访问目标服务器，但是为了获取目标服务器上的某资源，客户端需要向一台能够直接访问目标服务器的代理服务器发送请求，请求中还需要指定目标服务器地址。代理服务器获取到目标服务器上的资源后，将资源转发给客户端。

正向代理情况下，客户端需要明确指定代理服务器的IP及端口，才能使用。<br />

正向代理有如下几种典型的应用场景：<br />

1. 客户端无法直接访问目标服务器 ~~（比如说tumblr,youtube,twitter,google）~~，这时候通过正向代理服务器转发请求，然后正向代理将不可描述的内容转发给客户端。

2. 客户端访问授权：比如很多公司内部的电脑，不能直接连接Internet，必须在设置一个统一的Proxy来访问Internet。这样可以实现准确的授权控制。例如可以禁止上班时间浏览淘宝，可以禁止使用聊天工具， ~~还可以监控每个员工访问了什么网站哦~~ 。

比较著名的正向代理服务器有：[Squid](http://www.squid-cache.org/)、[Shadowsocks](https://zh.wikipedia.org/wiki/Shadowsocks)

### 反向代理

反向代理和正向代理正好相反（~~废话~~），对客户端来说代理服务器就和目标服务器是相同的。换句话来说，客户端是不知道目标服务器存在的。他直接向反向代理服务器请求资源，至于反向代理服务器再向哪台目标服务器请求，就管不着了。

和正向代理最大的区别就是：使用反向代理时，客户端完全不需要进行任何设置。反向代理服务器对客户端来说和普通服务器没有什么区别。

反向代理有如下几种典型的应用场景：<br />

1. 负载均衡：客户端往反向代理服务器发请求，反向代理服务器根据目标服务器不同的负载，将请求转发到负载较低的目标服务器。

2. 保护和隐藏目标服务器

比较著名的反向代理服务器有：[Nginx](http://http://nginx.org//)
